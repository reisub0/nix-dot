if PlagCheck('vim-arduino')
    if &ft =~? 'arduino'
        let g:arduino_dir = '/usr/share/arduino'
        " my_file.ino [arduino:avr:uno] [arduino:usbtinyisp] (/dev/ttyACM0:9600)
        function! MyStatusLine()
            let port = arduino#GetPort()
            let line = '%f [' . g:arduino_board . '] [' . g:arduino_programmer . ']'
            if !empty(port)
                let line = line . ' (' . port . ':' . g:arduino_serial_baud . ')'
            endif
            return line
        endfunction
        autocmd BufNewFile,BufRead *.ino let g:airline_section_x='%{MyStatusLine()}'
        nnoremap <buffer> <leader>am :ArduinoVerify<CR>
        nnoremap <buffer> <leader>au :ArduinoUpload<CR>
        nnoremap <buffer> <leader>ad :ArduinoUploadAndSerial<CR>
        nnoremap <buffer> <leader>ab :ArduinoChooseBoard<CR>
        nnoremap <buffer> <leader>ap :ArduinoChooseProgrammer<CR>
    endif
endif
